<?xml version="1.0" encoding="UTF-8"?>
<bpel:process exitOnStandardFault="yes" name="routing"
    suppressJoinFailure="no"
    targetNamespace="http://com.tibco.amsb/mediation/1483342279901"
    variableAccessSerializable="no"
    xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:medit="http://schemas.tibco.com/mediationIT/3.4.0/mediation"
    xmlns:ns="http://xmlns.example.com/1482476458205"
    xmlns:ns0="http://xmlns.example.com/1482400013809"
    xmlns:ns1="http://xmlns.example.com/1483340884570"
    xmlns:ns2="http:///com.tibco.amsb.core.common.exchange/mediationcontext"
    xmlns:ns3="http://schemas.tibco.com/amsb/rt/exceptions" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <plnk:partnerLinkType
        name="ns1:PortType1-PortTypeConsumer-partnerLinkType" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype">
        <plnk:role name="Consumer" portType="ns1:PortType"/>
    </plnk:partnerLinkType>
    <plnk:partnerLinkType
        name="ns0:PortType-PortTypeConsumer-partnerLinkType" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype">
        <plnk:role name="Consumer" portType="ns0:PortType"/>
    </plnk:partnerLinkType>
    <plnk:partnerLinkType
        name="ns:PortType-PortTypeProvider-partnerLinkType" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype">
        <plnk:role name="Provider" portType="ns:PortType"/>
    </plnk:partnerLinkType>
    <mediationmodel:MediationService name="routing"
        targetNamespace="http://com.tibco.amsb/mediation/1483342279901"
        version="3.4.0" xmi:id="_dD6G8NC9EeaP_6VhKi7d6A"
        xmi:version="2.0"
        xmlns:medct="http://xsd.tns.tibco.com/amsb/core/models/componentType"
        xmlns:mediationmodel="http://xsd.tns.tibco.com/amsb/core/models/mediationmodel"
        xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <interfaces name="PortType" xmi:id="_6KfbkNC9EeaP_6VhKi7d6A">
            <interface xsi:type="medct:Wsdl11Interface">
                <portType href="platform:/resource/Math_SOA/Service%20Descriptors/WSDL.wsdl#//@ePortTypes.0"/>
            </interface>
        </interfaces>
        <operationImplementations operationName="PortType^Operation">
            <mediationContextConfig hideStaticSecurityContext="true" hideStaticTransportContext="true"/>
        </operationImplementations>
        <targetEndpoints xmi:id="_xtdj4NDIEeaP_6VhKi7d6A">
            <abstractTarget name="PortType" xmi:id="_xtdj4dDIEeaP_6VhKi7d6A">
                <interface xsi:type="medct:Wsdl11Interface">
                    <portType href="platform:/resource/Math_SOA/Service%20Descriptors/concrete_add_wsdl.wsdl#//@ePortTypes.0"/>
                </interface>
            </abstractTarget>
            <targetOperationConfig operationName="Operation">
                <contextConfig hideStaticSecurityContext="true" hideStaticTransportContext="true"/>
            </targetOperationConfig>
        </targetEndpoints>
        <targetEndpoints xmi:id="_EQ8GINDJEeaP_6VhKi7d6A">
            <abstractTarget name="PortType1" xmi:id="_EQ8tMNDJEeaP_6VhKi7d6A">
                <interface xsi:type="medct:Wsdl11Interface">
                    <portType href="platform:/resource/Math_SOA/Service%20Descriptors/concrete_sub_wsdl.wsdl#//@ePortTypes.0"/>
                </interface>
            </abstractTarget>
            <targetOperationConfig operationName="Operation">
                <contextConfig hideStaticSecurityContext="true" hideStaticTransportContext="true"/>
            </targetOperationConfig>
        </targetEndpoints>
    </mediationmodel:MediationService>
    <bpel:documentation>routing</bpel:documentation>
    <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="../Service%20Descriptors/WSDL.wsdl" namespace="http://xmlns.example.com/1482476458205"/>
    <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="../Service%20Descriptors/concrete_add_wsdl.wsdl" namespace="http://xmlns.example.com/1482400013809"/>
    <bpel:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="../Service%20Descriptors/concrete_sub_wsdl.wsdl" namespace="http://xmlns.example.com/1483340884570"/>
    <bpel:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../com.tibco.mediation.it.common/schema/mediationcontext.xsd" namespace="http:///com.tibco.amsb.core.common.exchange/mediationcontext"/>
    <bpel:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../com.tibco.mediation.it.common/schema/exceptions.xsd" namespace="http://schemas.tibco.com/amsb/rt/exceptions"/>
    <bpel:import importType="http://www.w3.org/2001/XMLSchema"
        location="../../com.tibco.mediation.it.common/schema/ws-bpel_serviceref.xsd" namespace="http://docs.oasis-open.org/wsbpel/2.0/serviceref"/>
    <bpel:partnerLinks>
        <bpel:partnerLink myRole="Provider" name="PortTypeProvider" partnerLinkType="ns:PortType-PortTypeProvider-partnerLinkType">
            <bpel:documentation>MyRole</bpel:documentation>
        </bpel:partnerLink>
        <bpel:partnerLink name="PortTypeConsumer"
            partnerLinkType="ns0:PortType-PortTypeConsumer-partnerLinkType" partnerRole="Consumer">
            <bpel:documentation>PartnerRole</bpel:documentation>
        </bpel:partnerLink>
        <bpel:partnerLink name="PortType1Consumer"
            partnerLinkType="ns1:PortType1-PortTypeConsumer-partnerLinkType" partnerRole="Consumer">
            <bpel:documentation>PartnerRole</bpel:documentation>
        </bpel:partnerLink>
    </bpel:partnerLinks>
    <bpel:variables>
        <bpel:variable messageType="ns:Message1" name="Message1Var"/>
        <bpel:variable messageType="ns:Message2" name="Message2Var"/>
    </bpel:variables>
    <bpel:extensions>
        <bpel:extension mustUnderstand="no" namespace="http://xsd.tns.tibco.com/amsb/task/route/models/routemediationtaskmodel"/>
        <bpel:extension mustUnderstand="no" namespace="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel"/>
        <bpel:extension mustUnderstand="no" namespace="http://xsd.tns.tibco.com/amsb/core/models/mediationmodel"/>
    </bpel:extensions>
    <bpel:pick>
        <bpel:onMessage operation="Operation"
            partnerLink="PortTypeProvider" portType="ns:PortType" variable="Message1Var">
            <bpel:scope name="Operation">
                <bpel:variables>
                    <bpel:variable element="ns2:MessageContext" name="MessageContextVar"/>
                    <bpel:variable element="ns3:MediationFault" name="MediationFaultVar"/>
                    <bpel:variable element="ns3:MediationRuntimeFault" name="MediationRuntimeFaultVar"/>
                    <bpel:variable element="ns3:MediationTaskFault" name="MediationTaskFaultVar"/>
                    <bpel:variable
                        element="ns3:MediationTaskRuntimeFault" name="MediationTaskRuntimeFaultVar"/>
                    <bpel:variable element="ns3:UndeclaredFault" name="UndeclaredFaultVar"/>
                    <bpel:variable element="ns3:DefaultMediationFault" name="DefaultMediationFaultVar"/>
                    <bpel:variable messageType="ns0:add_inp_Message" name="add_inp_MessageVar"/>
                    <bpel:variable messageType="ns0:add_out_Message" name="add_out_MessageVar"/>
                    <bpel:variable messageType="ns1:sub_inp_Message" name="sub_inp_MessageVar"/>
                    <bpel:variable messageType="ns1:sub_out_Message1" name="sub_out_Message1Var"/>
                </bpel:variables>
                <bpel:faultHandlers>
                    <bpel:catch faultName="ns3:MediationTaskFault">
                        <bpel:flow>
                            <bpel:links>
                                <bpel:link name="transform-to-SendFault-MediationTaskFaultReplyWithFault"/>
                            </bpel:links>
                            <bpel:assign name="transform" validate="no">

                                <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description="" name="transform"
                                    xmi:id="_6Lcd0NC9EeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:tns=&quot;http://schemas.tibco.com/amsb/rt/exceptions&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageContext&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns:UndeclaredFault>&#xa;            &lt;xsl:if test=&quot;$MessageData/tns:MediationTaskFault/message&quot;>&#xa;                &lt;message>&#xa;                    &lt;xsl:value-of select=&quot;$MessageData/tns:MediationTaskFault/message&quot;/>&#xa;                &lt;/message>&#xa;            &lt;/xsl:if>&#xa;        &lt;/tns:UndeclaredFault>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>&#xa;"/>
                                </transformmediationtaskmodel:MapperTransformationMediationTask>
                                <bpel:sources>
                                    <bpel:source linkName="transform-to-SendFault-MediationTaskFaultReplyWithFault"/>
                                </bpel:sources>
                                <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("transform.xsl",$UndeclaredFaultVar,"MessageData",$MediationTaskFaultVar)]]></bpel:from>
                                    <bpel:to variable="UndeclaredFaultVar"/>
                                </bpel:copy>
                            </bpel:assign>
                            <bpel:reply faultName="ns3:UndeclaredFault"
                                name="SendFault-MediationTaskFaultReplyWithFault"
                                operation="Operation"
                                partnerLink="PortTypeProvider"
                                portType="ns:PortType" variable="UndeclaredFaultVar">
                                <bpel:targets>
                                    <bpel:target linkName="transform-to-SendFault-MediationTaskFaultReplyWithFault"/>
                                </bpel:targets>
                            </bpel:reply>
                        </bpel:flow>
                    </bpel:catch>
                    <bpel:catch faultName="ns3:MediationTaskRuntimeFault">
                        <bpel:flow>
                            <bpel:links>
                                <bpel:link name="transform1-to-SendFault-MediationTaskRuntimeFaultReplyWithFault"/>
                            </bpel:links>
                            <bpel:assign name="transform1" validate="no">

                                <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description="" name="transform1"
                                    xmi:id="_6Lcd19C9EeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:tns=&quot;http://schemas.tibco.com/amsb/rt/exceptions&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageContext&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns:UndeclaredFault>&#xa;            &lt;xsl:if test=&quot;$MessageData/tns:MediationTaskRuntimeFault/message&quot;>&#xa;                &lt;message>&#xa;                    &lt;xsl:value-of select=&quot;$MessageData/tns:MediationTaskRuntimeFault/message&quot;/>&#xa;                &lt;/message>&#xa;            &lt;/xsl:if>&#xa;        &lt;/tns:UndeclaredFault>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>&#xa;"/>
                                </transformmediationtaskmodel:MapperTransformationMediationTask>
                                <bpel:sources>
                                    <bpel:source linkName="transform1-to-SendFault-MediationTaskRuntimeFaultReplyWithFault"/>
                                </bpel:sources>
                                <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("transform1.xsl",$UndeclaredFaultVar,"MessageData",$MediationTaskRuntimeFaultVar)]]></bpel:from>
                                    <bpel:to variable="UndeclaredFaultVar"/>
                                </bpel:copy>
                            </bpel:assign>
                            <bpel:reply faultName="ns3:UndeclaredFault"
                                name="SendFault-MediationTaskRuntimeFaultReplyWithFault"
                                operation="Operation"
                                partnerLink="PortTypeProvider"
                                portType="ns:PortType" variable="UndeclaredFaultVar">
                                <bpel:targets>
                                    <bpel:target linkName="transform1-to-SendFault-MediationTaskRuntimeFaultReplyWithFault"/>
                                </bpel:targets>
                            </bpel:reply>
                        </bpel:flow>
                    </bpel:catch>
                    <bpel:catchAll>
                        <bpel:flow>
                            <bpel:links/>
                            <bpel:reply faultName="ns3:OriginalFault"
                                name="SendFault-Mediation_CatchAllReplyWithFault"
                                operation="Operation"
                                partnerLink="PortTypeProvider" portType="ns:PortType"/>
                        </bpel:flow>
                    </bpel:catchAll>
                </bpel:faultHandlers>
                <bpel:flow>
                    <bpel:scope name="route">
                        <bpel:variables>
                            <bpel:variable name="var" type="xsd:string"/>
                        </bpel:variables>
                        <bpel:sequence>
                            <bpel:assign validate="no">
                                <bpel:documentation>RuleVariablePreAssign</bpel:documentation>
                                <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("route.xsl",$var,"MessageData",$Message1Var)]]></bpel:from>
                                    <bpel:to variable="var"/>
                                </bpel:copy>
                            </bpel:assign>
                            <bpel:if name="route">

                                <routemediationtaskmodel:RouteMediationTask
                                    description="" name="route"
                                    xmi:id="_zCpOINDIEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:routemediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/route/models/routemediationtaskmodel"
                                    xmlns:rulesmodel="http://xsd.tns.tibco.com/amsb/core/models/rulesmodel"
                                    xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                                    <configuration>
                                    <embeddedRuleSet name="embedded">
                                    <variables name="var" type="string"/>
                                    <rules xsi:type="rulesmodel:ListRules">
                                    <ruleCases name="case1">
                                    <expression xsi:type="rulesmodel:SimpleRuleExpression">
                                    <conditions variable="//@configuration/@embeddedRuleSet/@variables.0">
                                    <value
                                    queryLanguage="XPath" value="='+'"/>
                                    </conditions>
                                    </expression>
                                    </ruleCases>
                                    <ruleCases name="case2">
                                    <expression xsi:type="rulesmodel:SimpleRuleExpression">
                                    <conditions variable="//@configuration/@embeddedRuleSet/@variables.0">
                                    <value
                                    queryLanguage="XPath" value="='-'"/>
                                    </conditions>
                                    </expression>
                                    </ruleCases>
                                    </rules>
                                    </embeddedRuleSet>
                                    <variableBindingSet
                                    xsi:type="rulesmodel:XsltVariableBindingSet" xsltContent="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns=&quot;http://www.tibco.com/schemas/Math/soap/Schema.xsd&quot; xmlns:tns=&quot;http://xmlns.example.com/1482476458205&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;rule>&#xa;            &lt;var>&#xa;                &lt;xsl:value-of select=&quot;$MessageData/tns:Message1/tns:msg1/ns:input/ns:operator&quot;/>&#xa;            &lt;/var>&#xa;        &lt;/rule>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </configuration>
                                </routemediationtaskmodel:RouteMediationTask>
                                <bpel:documentation>case1</bpel:documentation>
                                <bpel:condition><![CDATA[$var='+']]></bpel:condition>
                                <bpel:flow name="case1">
                                    <bpel:links>
                                    <bpel:link name="transform2-to-PortTypeOperation"/>
                                    <bpel:link name="PortTypeOperation-to-transform5"/>
                                    <bpel:link name="transform5-to-OperationReply"/>
                                    </bpel:links>
                                    <bpel:assign name="transform2" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform2"
                                    taskId="1483347326350"
                                    xmi:id="_NCmJANDJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns=&quot;http://www.tibco.com/schemas/Math/soap/Schema.xsd&quot; xmlns:tns=&quot;http://xmlns.example.com/1482476458205&quot; xmlns:tns1=&quot;http://xmlns.example.com/1482400013809&quot; xmlns:ns1=&quot;http://www.tibco.com/schemas/Math/Schema.xsd&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns1:add_inp_Message>&#xa;            &lt;tns1:In>&#xa;                &lt;ns1:Numbers>&#xa;                    &lt;ns1:num1>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:Message1/tns:msg1/ns:input/ns:num1&quot;/>&#xa;                    &lt;/ns1:num1>&#xa;                    &lt;ns1:num2>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:Message1/tns:msg1/ns:input/ns:num2&quot;/>&#xa;                    &lt;/ns1:num2>&#xa;                &lt;/ns1:Numbers>&#xa;            &lt;/tns1:In>&#xa;        &lt;/tns1:add_inp_Message>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:sources>
                                    <bpel:source linkName="transform2-to-PortTypeOperation"/>
                                    </bpel:sources>
                                    <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("transform2.xsl",$add_inp_MessageVar,"MessageData",$Message1Var)]]></bpel:from>
                                    <bpel:to variable="add_inp_MessageVar"/>
                                    </bpel:copy>
                                    </bpel:assign>
                                    <bpel:invoke
                                    inputVariable="add_inp_MessageVar"
                                    name="PortTypeOperation"
                                    operation="Operation"
                                    outputVariable="add_out_MessageVar"
                                    partnerLink="PortTypeConsumer" portType="ns0:PortType">
                                    <bpel:targets>
                                    <bpel:target linkName="transform2-to-PortTypeOperation"/>
                                    </bpel:targets>
                                    <bpel:sources>
                                    <bpel:source linkName="PortTypeOperation-to-transform5"/>
                                    </bpel:sources>
                                    <bpel:catch faultName="ns3:TimeoutFault">
                                    <bpel:flow>
                                    <bpel:links>
                                    <bpel:link name="transform-TimeoutFault-PortType-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:links>
                                    <bpel:assign
                                    name="transform-TimeoutFault-PortType-Operation" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform-TimeoutFault-PortType-Operation"
                                    xmi:id="_LwXFF9DJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tns=&quot;http://schemas.tibco.com/amsb/rt/exceptions&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns:UndeclaredFault>&#xa;            &lt;xsl:if test=&quot;$MessageData/tns:TimeoutFault/message&quot;>&#xa;                &lt;message>&#xa;                    &lt;xsl:value-of select=&quot;$MessageData/tns:TimeoutFault/message&quot;/>&#xa;                &lt;/message>&#xa;            &lt;/xsl:if>&#xa;        &lt;/tns:UndeclaredFault>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>&#xa;"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:sources>
                                    <bpel:source linkName="transform-TimeoutFault-PortType-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:sources>
                                    </bpel:assign>
                                    <bpel:reply
                                    faultName="ns3:UndeclaredFault"
                                    name="SendFault-TimeoutFaultReplyWithFault"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="UndeclaredFaultVar">
                                    <bpel:targets>
                                    <bpel:target linkName="transform-TimeoutFault-PortType-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:targets>
                                    </bpel:reply>
                                    </bpel:flow>
                                    </bpel:catch>
                                    <bpel:catch faultName="ns3:UndeclaredFault">
                                    <bpel:flow>
                                    <bpel:reply
                                    faultName="ns3:UndeclaredFault"
                                    name="SendFault-UndeclaredFaultReplyWithFault"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="UndeclaredFaultVar"/>
                                    </bpel:flow>
                                    </bpel:catch>
                                    </bpel:invoke>
                                    <bpel:assign name="transform5" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform5"
                                    taskId="1483347375994"
                                    xmi:id="_UcB0sNDJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns=&quot;http://www.tibco.com/schemas/Math/Schema1.xsd&quot; xmlns:tns=&quot;http://xmlns.example.com/1482400013809&quot; xmlns:tns1=&quot;http://xmlns.example.com/1482476458205&quot; xmlns:ns2=&quot;http://www.tibco.com/schemas/Math/soap/Schema.xsd2&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns1:Message2>&#xa;            &lt;tns1:msg2>&#xa;                &lt;ns2:output>&#xa;                    &lt;ns2:result>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:add_out_Message/tns:out/ns:Output/ns:Answer&quot;/>&#xa;                    &lt;/ns2:result>&#xa;                &lt;/ns2:output>&#xa;            &lt;/tns1:msg2>&#xa;        &lt;/tns1:Message2>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:targets>
                                    <bpel:target linkName="PortTypeOperation-to-transform5"/>
                                    </bpel:targets>
                                    <bpel:sources>
                                    <bpel:source linkName="transform5-to-OperationReply"/>
                                    </bpel:sources>
                                    </bpel:assign>
                                    <bpel:reply name="OperationReply"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="Message2Var">
                                    <bpel:targets>
                                    <bpel:target linkName="transform5-to-OperationReply"/>
                                    </bpel:targets>
                                    </bpel:reply>
                                </bpel:flow>
                                <bpel:elseif>
                                    <bpel:documentation>case2</bpel:documentation>
                                    <bpel:condition><![CDATA[$var='-']]></bpel:condition>
                                    <bpel:flow name="case2">
                                    <bpel:links>
                                    <bpel:link name="transform3-to-PortType1Operation"/>
                                    <bpel:link name="PortType1Operation-to-transform6"/>
                                    <bpel:link name="transform6-to-OperationReply"/>
                                    </bpel:links>
                                    <bpel:assign name="transform3" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform3"
                                    taskId="1483347328830"
                                    xmi:id="_NaPM8NDJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns=&quot;http://www.tibco.com/schemas/Math/soap/Schema.xsd&quot; xmlns:tns=&quot;http://xmlns.example.com/1482476458205&quot; xmlns:tns1=&quot;http://xmlns.example.com/1483340884570&quot; xmlns:ns1=&quot;http://www.tibco.com/schemas/Math/Schema.xsd&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns1:sub_inp_Message>&#xa;            &lt;tns1:In>&#xa;                &lt;ns1:Numbers>&#xa;                    &lt;ns1:num1>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:Message1/tns:msg1/ns:input/ns:num1&quot;/>&#xa;                    &lt;/ns1:num1>&#xa;                    &lt;ns1:num2>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:Message1/tns:msg1/ns:input/ns:num2&quot;/>&#xa;                    &lt;/ns1:num2>&#xa;                &lt;/ns1:Numbers>&#xa;            &lt;/tns1:In>&#xa;        &lt;/tns1:sub_inp_Message>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:sources>
                                    <bpel:source linkName="transform3-to-PortType1Operation"/>
                                    </bpel:sources>
                                    <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("transform3.xsl",$sub_inp_MessageVar,"MessageData",$Message1Var)]]></bpel:from>
                                    <bpel:to variable="sub_inp_MessageVar"/>
                                    </bpel:copy>
                                    </bpel:assign>
                                    <bpel:invoke
                                    inputVariable="sub_inp_MessageVar"
                                    name="PortType1Operation"
                                    operation="Operation"
                                    outputVariable="sub_out_Message1Var"
                                    partnerLink="PortType1Consumer" portType="ns1:PortType">
                                    <bpel:targets>
                                    <bpel:target linkName="transform3-to-PortType1Operation"/>
                                    </bpel:targets>
                                    <bpel:sources>
                                    <bpel:source linkName="PortType1Operation-to-transform6"/>
                                    </bpel:sources>
                                    <bpel:catch faultName="ns3:TimeoutFault">
                                    <bpel:flow>
                                    <bpel:links>
                                    <bpel:link name="transform-TimeoutFault-PortType1-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:links>
                                    <bpel:assign
                                    name="transform-TimeoutFault-PortType1-Operation" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform-TimeoutFault-PortType1-Operation"
                                    xmi:id="_MBX8l9DJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tns=&quot;http://schemas.tibco.com/amsb/rt/exceptions&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns:UndeclaredFault>&#xa;            &lt;xsl:if test=&quot;$MessageData/tns:TimeoutFault/message&quot;>&#xa;                &lt;message>&#xa;                    &lt;xsl:value-of select=&quot;$MessageData/tns:TimeoutFault/message&quot;/>&#xa;                &lt;/message>&#xa;            &lt;/xsl:if>&#xa;        &lt;/tns:UndeclaredFault>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>&#xa;"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:sources>
                                    <bpel:source linkName="transform-TimeoutFault-PortType1-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:sources>
                                    </bpel:assign>
                                    <bpel:reply
                                    faultName="ns3:UndeclaredFault"
                                    name="SendFault-TimeoutFaultReplyWithFault"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="UndeclaredFaultVar">
                                    <bpel:targets>
                                    <bpel:target linkName="transform-TimeoutFault-PortType1-Operation-to-SendFault-TimeoutFaultReplyWithFault"/>
                                    </bpel:targets>
                                    </bpel:reply>
                                    </bpel:flow>
                                    </bpel:catch>
                                    <bpel:catch faultName="ns3:UndeclaredFault">
                                    <bpel:flow>
                                    <bpel:reply
                                    faultName="ns3:UndeclaredFault"
                                    name="SendFault-UndeclaredFaultReplyWithFault"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="UndeclaredFaultVar"/>
                                    </bpel:flow>
                                    </bpel:catch>
                                    </bpel:invoke>
                                    <bpel:assign name="transform6" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform6"
                                    taskId="1483347378666"
                                    xmi:id="_U1gEoNDJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:ns=&quot;http://www.tibco.com/schemas/Math/Schema1.xsd&quot; xmlns:tns=&quot;http://xmlns.example.com/1483340884570&quot; xmlns:tns1=&quot;http://xmlns.example.com/1482476458205&quot; xmlns:ns2=&quot;http://www.tibco.com/schemas/Math/soap/Schema.xsd2&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns1:Message2>&#xa;            &lt;tns1:msg2>&#xa;                &lt;ns2:output>&#xa;                    &lt;ns2:result>&#xa;                        &lt;xsl:value-of select=&quot;$MessageData/tns:sub_out_Message1/tns:Out/ns:Output/ns:Answer&quot;/>&#xa;                    &lt;/ns2:result>&#xa;                &lt;/ns2:output>&#xa;            &lt;/tns1:msg2>&#xa;        &lt;/tns1:Message2>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:targets>
                                    <bpel:target linkName="PortType1Operation-to-transform6"/>
                                    </bpel:targets>
                                    <bpel:sources>
                                    <bpel:source linkName="transform6-to-OperationReply"/>
                                    </bpel:sources>
                                    <bpel:copy>
                                    <bpel:from><![CDATA[bpel:doXslTransform("transform6.xsl",$Message2Var,"MessageData",$sub_out_Message1Var)]]></bpel:from>
                                    <bpel:to variable="Message2Var"/>
                                    </bpel:copy>
                                    </bpel:assign>
                                    <bpel:reply
                                    name="OperationReply"
                                    operation="Operation"
                                    partnerLink="PortTypeProvider"
                                    portType="ns:PortType" variable="Message2Var">
                                    <bpel:targets>
                                    <bpel:target linkName="transform6-to-OperationReply"/>
                                    </bpel:targets>
                                    </bpel:reply>
                                    </bpel:flow>
                                </bpel:elseif>
                                <bpel:else>
                                    <bpel:documentation>otherwise</bpel:documentation>
                                    <bpel:flow name="otherwise">
                                    <bpel:links>
                                    <bpel:link name="transform4-to-throw"/>
                                    </bpel:links>
                                    <bpel:assign name="transform4" validate="no">

                                    <transformmediationtaskmodel:MapperTransformationMediationTask
                                    description=""
                                    name="transform4"
                                    taskId="1483347331430"
                                    xmi:id="_NzBgYNDJEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:transformmediationtaskmodel="http://xsd.tns.tibco.com/amsb/task/transform/models/transformmediationtaskmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <transform
                                    queryLanguage="xslt" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>&#xa;&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:tns=&quot;http://schemas.tibco.com/amsb/rt/exceptions&quot; version=&quot;2.0&quot;>&#xa;    &lt;xsl:param name=&quot;MediationFlowProperties&quot;/>&#xa;    &lt;xsl:param name=&quot;MessageData&quot;/>&#xa;    &lt;xsl:template name=&quot;MessageData&quot; match=&quot;/&quot;>&#xa;        &lt;tns:MediationTaskFault>&#xa;            &lt;message>&#xa;                &lt;xsl:value-of select=&quot;&amp;quot;invalid&amp;quot;&quot;/>&#xa;            &lt;/message>&#xa;        &lt;/tns:MediationTaskFault>&#xa;    &lt;/xsl:template>&#xa;&lt;/xsl:stylesheet>"/>
                                    </transformmediationtaskmodel:MapperTransformationMediationTask>
                                    <bpel:sources>
                                    <bpel:source linkName="transform4-to-throw"/>
                                    </bpel:sources>
                                    </bpel:assign>
                                    <bpel:throw
                                    faultName="ns3:MediationTaskFault"
                                    faultVariable="MediationTaskFaultVar" name="throw">
                                    <mediationmodel:ThrowFault
                                    description=""
                                    name="throw"
                                    xmi:id="_zCpOJdDIEeaP_6VhKi7d6A"
                                    xmi:version="2.0"
                                    xmlns:exceptions="http://schemas.tibco.com/amsb/rt/exceptions"
                                    xmlns:mediationmodel="http://xsd.tns.tibco.com/amsb/core/models/mediationmodel" xmlns:xmi="http://www.omg.org/XMI">
                                    <faultType faultTypeName="exceptions:MediationTaskFault"/>
                                    </mediationmodel:ThrowFault>
                                    <bpel:documentation/>
                                    <bpel:targets>
                                    <bpel:target linkName="transform4-to-throw"/>
                                    </bpel:targets>
                                    </bpel:throw>
                                    </bpel:flow>
                                </bpel:else>
                            </bpel:if>
                        </bpel:sequence>
                    </bpel:scope>
                </bpel:flow>
            </bpel:scope>
        </bpel:onMessage>
    </bpel:pick>
</bpel:process>
